# 벨만포드 (Bellman-Ford)

## 개념
- 하나의 시작 정점에서 다른 모든 정점까지의 최단 거리를 구하는 알고리즘
- 음수 가중치 간선이 있어도 사용 가능
- 음수 사이클 존재 여부까지 판별 가능
- **"모든 간선을 여러 번 반복해서 완화(Relaxation) 하면
  최단 거리는 결국 안정된다"**

## 사용 상황
- 음수 가중치가 존재할 수 있는 그래프
- 음수 사이클 탐지가 필요한 문제
- 예시
  - 환율 arbitrage
  - 시간 역행 / 손해 보는 이동
  - “무한히 줄어드는 비용” 판별 문제

## 구현 포인트
#### 1. 모든 간선을 V-1번 반복
- 최단 경로는 초치대 V-1개의 간선만 사용 가능

#### 2. 간선 완화
```java
if (dist[u] != INF && dist[v] > dist[u] + w)
	dist[v] = dist[u] + w;
```

#### 3. 음수 사이클 판별
- 한 번 더 (총 V번째) 완화 시도
- 여전히 줄어들면 음수 사이클 존재

+) 음수 사이클만 판별하는 방법 &rarr; **슈퍼 소스**

> **슈퍼소스란?**
> - 그래프에 인위적으로 추가한 **가짜 시작점**
> - 이 정점에서 모든 정점으로 비용 0의 간선을 연결함
> - 슈퍼 소스를 쓰면 모든 노드에 도달 가능하고, 음수 사이클이 있으면 반드시 완화 발생

```java
int SUPER = 0;
long[] dist = new long[N + 1 + 1]; // 0번 포함
Arrays.fill(dist, INF);
dist[SUPER] = 0;

// 모든 노드로 0 비용 간선
for (int i = 1; i <= N; i++) {
    edges.add(new int[] { SUPER, i, 0 });
}
```

## 시간복잡도
- **O(V * E) + O(E)**
- O(E): 음수 사이클 검사 
- &rarr; V ≤ 500, E ≤ 6000 정도가 현실적

## 실수 포인트
- dist[u] == INF 인 상태에서 완화 시도
- V번 반복 안 하고 끝냄
- 음수 사이클 검사 누락
- 다익스트라로 풀 수 있는 문제에 벨만포드 씀

## 대표 문제
- [백준 11657 타임머신](https://www.acmicpc.net/problem/11657)
- [백준 1865 웜홀](https://www.acmicpc.net/problem/1865)
- [백준 1219 오민식의 고민](https://www.acmicpc.net/problem/1219)